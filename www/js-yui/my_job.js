function initUI(a){$("#job_type").children().remove();$("#job_status").children().remove();$("#job_type").addOptions(a["job.types"],{value:"code",text:"text"});$("#job_status").addOptions(a["job.status"],{value:"code",text:"text"});show(a)}function show(c){var a=c.jobs;var b;$("#total").text("Total:"+a.length+"条记录!");$("#data").jqGrid({datatype:"local",height:"auto",colNames:["ID","时间","类别","主题","状态"],colModel:[{name:"id",hidden:true},{name:"reqTime",index:"reqTime",formatter:"date",width:120,sortable:false,align:"center"},{name:"#typeText",width:100,sortable:false},{name:"title",width:593,sortable:false},{name:"#statusText",width:100,sortable:false,align:"center"},],loadui:true,multiselect:false,onSelectRow:openRow,scroll:false,scrollOffset:0});IDS_JOB.setTypes(c["job.types"]);IDS_JOB.setStatus(c["job.status"]);for(b=0;b<a.length;b++){IDS_JOB.initJob(a[b]);$("#data").addRowData(b+1,a[b])}}function openRow(d,h,a,c){var g=$("#data").getRowData(d);var b=$.toJSON({id:g.id});var e=function(f){openJob(d,f)};$.ajax({type:"POST",contentType:"application/json",url:IDS_CONTEXT_PATH+"/job/open_job",data:b,dataType:"json",success:e,error:function(){ajaxError(arguments,this)}})}function openJob(a,b){$("#job_list").hide();var c={"#onJobSave":function(d){IDS_JOB.closeAll();$("#job_list").show();$("#data").setRowData(a,d)},"#onJobDelete":function(d){IDS_JOB.closeAll();$("#job_list").show();$("#data").delRowData(a)},"#onJobReturn":function(){$("#job_list").show()},"#onActReturn":function(){$("#job_list").show()}};IDS_JOB.openJob(b,c)}$(function(){initMenu(1);$.ajax({type:"POST",contentType:"application/json",data:"{}",dataType:"json",url:IDS_CONTEXT_PATH+"/job/my_job",success:function(a){initUI(a)},error:function(){ajaxError(arguments,this)}})});