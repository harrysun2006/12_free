String.prototype.trim=function(){return this.replace(/(^\s*)(\s*$)/g,"")};String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")};String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")};String.prototype.repeat=function(c){var b="";if(c<=0||this==""){return b}for(var a=0;a<c;a++){b=b.concat(this)}return b};String.prototype.width=function(){var c=this.split("\n");var a=0;for(var b=0;b<c.length;b++){a=Math.max(a,c[b].length)}return a};String.prototype.text=function(){return this.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/'/g,"\\'")};function isEmpty(a){return !a||a.match(/^\s*$/)}String.prototype.empty=function(){return isEmpty(this)};function cloneObject(e,b){var a=typeof(b)=="undefined"?true:(b?true:false);var d=new Object();var g;for(var f in e){g=getClass(e[f]);if(g=="Object"&&a){d[f]=cloneObject(e[f],a)}else{if(g=="Array"&&a){d[f]=cloneArray(e[f],a)}else{d[f]=e[f]}}}return d}function cloneArray(b,d){var a=typeof(d)=="undefined"?true:(d?true:false);var e=new Array();var g;for(var f=0;f<b.length;f++){g=getClass(b[f]);if(g=="Object"&&a){e[f]=cloneObject(b[f],a)}else{if(g=="Array"&&a){e[f]=cloneArray(b[f],a)}else{e[f]=b[f]}}}return e}Array.prototype.clone=function(a){return cloneArray(this,a)};function findNext(a,c,d){if(!a||getClass(a)!="Array"||a.length<=0){return null}if(typeof(c)=="undefined"){return a[0]}if(typeof(d)=="undefined"){d=true}var b=0,g=0,e=0;while(e<1&&b<a.length){if(g){return(a[b]==c)?null:a[b]}if(a[b]==c){g=1}if(++b>=a.length&&d){b=0;e++}}return null}Array.prototype.next=function(a,b){return findNext(this,a,b)};function findPrev(a,c,d){if(!a||getClass(a)!="Array"||a.length<=0){return null}if(typeof(c)=="undefined"){return a[a.length-1]}if(typeof(d)=="undefined"){d=true}var b=a.length,g=0,e=0;while(e<1&&b>=0){if(g){return(a[b]==c)?null:a[b]}if(a[b]==c){g=1}if(--b<0&&d){b=a.length-1;e++}}return null}Array.prototype.prev=function(a,b){return findPrev(this,a,b)};function buildMap(a,g){var e=new Object();if(!a||getClass(a)!="Array"){return e}var d,c;var f=g&&g.key?g.key:"key";for(var b=0;b<a.length;b++){d=a[b];c=typeof(d[f])!="undefined"?d[f]:d;e[c]=d}return e}Array.prototype.map=function(a){return buildMap(this,a)};function formatDate(J,M,y){var l=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,D=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,L=/[^-+\dA-Z]/g,p=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),e=((typeof M==="string")?M.match(p):null),K=function(j,i){j=String(j);i=parseInt(i,10)||2;while(j.length<i){j="0"+j}return j},a={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},d=0,r,F,c,E=["i18n"];if(!y){y={dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(i){return i<11||i>13?["st","nd","rd","th"][Math.min((i-1)%10,3)]:"th"}}}E.i18n={dayNames:y.dayNames,monthNames:y.monthNames};if(M.constructor===Number){if(String(J).toLowerCase()=="u"){M=M*1000}d=new Date(M)}else{if(M.constructor===Date){d=M}else{if(e!==null){d=new Date(parseInt(e[1],10));if(e[3]){var f=Number(e[5])*60+Number(e[6]);f*=((e[4]=="-")?1:-1);f-=d.getTimezoneOffset();d.setTime(Number(Number(d)+(f*60*1000)))}}else{M=String(M).split(/[\\\/:_;.,\t\T\s-]/);J=J.split(/[\\\/:_;.,\t\T\s-]/);for(F=0,c=J.length;F<c;F++){if(J[F]=="M"){r=$.inArray(M[F],E.i18n.monthNames);if(r!==-1&&r<12){M[F]=r+1}}if(J[F]=="F"){r=$.inArray(M[F],E.i18n.monthNames);if(r!==-1&&r>11){M[F]=r+1-12}}if(M[F]){a[J[F].toLowerCase()]=parseInt(M[F],10)}}if(a.f){a.m=a.f}if(a.m===0&&a.y===0&&a.d===0){return"&#160;"}a.m=parseInt(a.m,10)-1;var O=a.y;if(O>=70&&O<=99){a.y=1900+a.y}else{if(O>=0&&O<=69){a.y=2000+a.y}}d=new Date(a.y,a.m,a.d,a.h,a.i,a.s,a.u)}}}var v=d.getHours(),I=d.getMinutes(),H=d.getDate(),C=d.getMonth()+1,B=d.getTimezoneOffset(),A=d.getSeconds(),x=d.getMilliseconds(),t=d.getDay(),b=d.getFullYear(),h=(t+6)%7+1,q=(new Date(b,C-1,H)-new Date(b,0,1))/86400000,g={d:K(H),D:E.i18n.dayNames[t],j:H,l:E.i18n.dayNames[t+7],N:h,S:y.S(H),w:t,z:q,W:h<5?Math.floor((q+h-1)/7)+1:Math.floor((q+h-1)/7)||((new Date(b-1,0,1).getDay()+6)%7<4?53:52),F:E.i18n.monthNames[C-1+12],m:K(C),M:E.i18n.monthNames[C-1],n:C,t:"?",L:"?",o:"?",Y:b,y:String(b).substring(2),a:v<12?y.AmPm[0]:y.AmPm[1],A:v<12?y.AmPm[2]:y.AmPm[3],B:"?",g:v%12||12,G:v,h:K(v%12||12),H:K(v),i:K(I),s:K(A),u:x,e:"?",I:"?",O:(B>0?"-":"+")+K(Math.floor(Math.abs(B)/60)*100+Math.abs(B)%60,4),P:"?",T:(String(d).match(D)||[""]).pop().replace(L,""),Z:"?",c:"?",r:"?",U:Math.floor(d/1000)};return J.replace(l,function(i){return i in g?g[i]:i.substring(1)})}Date.prototype.format=function(b,a){return formatDate(b,this,a)};function getClass(a){if(a!=undefined&&a.constructor&&a.constructor.toString()){m=a.constructor.toString().match(/function\s*(\w+)/);if(m&&m.length==2){return m[1]}m=a.constructor.toString().match(/object\s*(\w+)/);if(m&&m.length==2){return m[1]}}return typeof(a)}var MB_OK=1;var MB_CANCEL=2;var MB_OKCANCEL=3;var MB_YES=4;var MB_NO=8;var MB_YESNO=12;var MB_YESNOCANCEL=14;var ID_OK=1;var ID_CANCEL=2;var ID_YES=4;var ID_NO=8;var MB_OK_TEXT="确定";var MB_CANCEL_TEXT="取消";var MB_YES_TEXT=" 是 ";var MB_NO_TEXT=" 否 ";var BUTTON_OK;var BUTTON_YES;var BUTTON_NO;var BUTTON_CANCEL;var MB_ICONERROR=MB_ICONSTOP="/image/icon-error.gif";var MB_ICONINFORMATION="/image/icon-info.gif";var MB_ICONQUESTION="/image/icon-question.gif";var MB_ICONWARNING="/image/icon-warning.gif";function MessageBox(){var a=$("#ids_message_box");var j=function(){a.dialog("destroy")};j();var h=function(){a.dialog("close").dialog("destroy")};if(arguments.length==0||!arguments[0]){return}var c=arguments[0];if(typeof(c)!="object"){c={msg:c.toString()}}var r=0;var k=c.msg.replace(/\n/g,"<br>");var l=c.msg.width()*8;if(l<320){l=320}else{if(l>800){l=800}}var s=typeof(c.title)!="undefined"?c.title:(typeof(arguments[1])!="undefined"?arguments[1]:IDS_TITLE);if(s==null){s=IDS_TITLE}var p=typeof(c.icon)=="string"?c.icon:(typeof(arguments[2])=="string"?arguments[2]:null);if(p){p=IDS_CONTEXT_PATH+p+"?"+IDS_VER}var b=c.button?c.button:(arguments[3]?arguments[3]:0);var o=[];BUTTON_OK={text:MB_OK_TEXT,click:function(){r=ID_OK;$(this).dialog("close")}};BUTTON_YES={text:MB_YES_TEXT,click:function(){r=ID_YES;$(this).dialog("close")}};BUTTON_NO={text:MB_NO_TEXT,click:function(){r=ID_NO;$(this).dialog("close")}};BUTTON_CANCEL={text:MB_CANCEL_TEXT,click:function(){r=ID_CANCEL;$(this).dialog("close")}};if(b&MB_OK){o.push(BUTTON_OK)}if(b&MB_YES){o.push(BUTTON_YES)}if(b&MB_NO){o.push(BUTTON_NO)}if(b&MB_CANCEL){o.push(BUTTON_CANCEL)}var d=c.callback&&$.isFunction(c.callback)?c.callback:(arguments[4]&&$.isFunction(arguments[4])?arguments[4]:null);var i=typeof(c.timeout)=="number"?c.timeout:(typeof(arguments[5])=="number"?arguments[5]:IDS_TIMEOUT);i=parseFloat(i);var q;if($.browser.msie&&$.browser.version<7){q={buttons:o,closeOnEscape:true,draggable:true,resizable:true,width:l,zIndex:3999}}else{q={bgiframe:true,buttons:o,closeOnEscape:true,draggable:true,modal:true,resizable:true,width:l,zIndex:3999}}if(d){q.close=function(){d(r)}}k="<div class='left'><div class='left ui-dialog-content-icon'><img id='mb_icon' /></div><div class='left'>"+k+"</div></div>";a.dialog("destroy").attr("title",s).html(k).dialog(q);var n=a.parent();var g=n.height();var f=$("div.ui-dialog-titlebar",n).height();var e=$("div.ui-dialog-buttonset > button",n).height();a.height(g-f-e-32);$(".ui-dialog .ui-dialog-content #mb_icon").attr("src",p);if(i>0){setTimeout(h,i*1000)}}window._alert=window.alert;window.alert=function(a){MessageBox(a,IDS_ERROR,MB_ICONERROR,MB_OK,null,0)};function ajaxError(e,g,f){var d=e.length>0?e[0]:null;var c=e.length>1?e[1]:null;var h=e.length>2?e[2]:null;var a=getClass(d);var b="抱歉, 系统发生错误: \n";if(c){b+="错误代码: "+c+"\n"}if(typeof(h)=="string"){m=h.match(/(.*?):/);if(m){b+="错误详情: "+m[1]+"...\n"}}else{if(getClass(h)=="SyntaxError"){b+=h+"\n"}}if(g.type){b+="请求类型: "+g.type+"\n"}if(g.url){b+="请求URL: "+g.url+"\n"}if(a=="XMLHttpRequest"&&d.status!=200){b+="返回状态: "+d.status+"("+d.statusText+")\n响应头: "+d.getAllResponseHeaders()+"\n"}b+="请联系系统管理员!";if(typeof(f)=="undefined"){f=0}MessageBox(b,IDS_TITLE,MB_ICONERROR,MB_OK,null,f)}function debug(c,d){var a=function(h,f,i){if(typeof(h)=="function"){return"fucntion.."}else{if(typeof(h)!="object"||i<=0){return typeof(h)=="string"?h.text():h}}var g="\n";for(var e in h){g=g.concat("&nbsp;".repeat(f),e,"[",getClass(h[e]),"]: ",a(h[e],f+2,i-1),"\n")}return g};if(typeof(d)=="undefined"){d=1}var b="type: "+typeof(c)+", class: "+getClass(c)+", detail:\n"+a(c,0,d);MessageBox(b,IDS_INFO,MB_ICONINFORMATION,MB_OK,null,0)}function bind(e){if(!e||!e.controls){return}var j=e.controls;var a={blur:1,focus:1,focusin:1,focusout:1,load:1,resize:1,scroll:1,unload:1,click:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1,change:1,select:1,submit:1,keydown:1,keypress:1,keyup:1,error:1,controls:0};var f={};for(var b in e){if(!a[b]||typeof(e[b])!="function"){continue}f[b]=e[b]}var d=[];for(var i in j){g=j[i];if(!g||typeof(g)!="object"||typeof(g[0])!="object"){continue}d.push(g[0])}e["#controls"]=d;var g;for(var i in j){g=j[i];if(!g||typeof(g)!="object"||typeof(g.bind)!="function"){continue}for(var h in f){g.bind(h,e,f[h])}}}function unbind(f){if(!f||!f.controls){return}var b=f.controls;var e={blur:1,focus:1,focusin:1,focusout:1,load:1,resize:1,scroll:1,unload:1,click:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1,change:1,select:1,submit:1,keydown:1,keypress:1,keyup:1,error:1,controls:0};var d={};for(var i in f){if(!e[i]||typeof(f[i])!="function"){continue}d[i]=f[i]}var h;for(var a in b){h=b[a];if(!h||typeof(h)!="object"||typeof(h.bind)!="function"){continue}for(var g in d){h.unbind(g,d[g])}}}function getInputableItems(a){return null}var VK_ENTER=13;var VK_UP=38;var VK_DOWN=40;function genericKeyDown(e){if(!e){return}var f=e.data?e.data:(e.currentTarget?getInputableItems(e.currentTarget):null);if(!f||getClass(f.controls)!="Array"){return}var d=e.target;var a=f["#controls"];var c=e.keyCode;var b=function(i,h){var g=$(i);if(!g){return}if(typeof(g.focus)=="function"){g.focus()}if(typeof(g.click)=="function"&&h==VK_ENTER){g.click()}if(typeof(g.btOn)=="function"){g.btOn()}};if(c==VK_ENTER||c==VK_DOWN){b(a.next(d),c)}else{if(c==VK_UP){b(a.prev(d),c)}}}$.fn.serialize=function(){var c={};var b=this.serializeArray();$.each(b,function(){if(c[this.name]){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c};$.fn.addOptions=function(q,a){try{var j=$(this);if(j[0].tagName!="SELECT"||!q){return}if(typeof(q)!="object"){q=[q]}var g,p,b,f,k,n,d,l,o;b=a&&a.value?a.value:"value";f=a&&a.text?a.text:"text";l=a&&a.svalue?a.svalue:null;o=a&&a.stext?a.stext:null;for(var c in q){p=q[c];if(typeof(p)=="object"){k=p[b];n=p[f];d=p}else{if(typeof(p)=="function"){continue}else{k=n=p;d=null}}if(!k&&!n){continue}g=$(document.createElement("option"));g.val(k);g.text(n?n:k);if(d){g.data(d)}if(l==k||o==n){g.attr("selected",true)}j.append(g)}}catch(h){alert(h)}};