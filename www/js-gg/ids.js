String.prototype.trim=function(){return this.replace(/(^\s*)(\s*$)/g,"")};String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")};String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")};String.prototype.repeat=function(a){var c="";if(a<=0||this=="")return c;for(var d=0;d<a;d++)c=c.concat(this);return c};String.prototype.width=function(){for(var a=this.split("\n"),c=0,d=0;d<a.length;d++)c=Math.max(c,a[d].length);return c};
String.prototype.text=function(){return this.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/'/g,"\\'")};function isEmpty(a){return!a||a.match(/^\s*$/)}String.prototype.empty=function(){return isEmpty(this)};function cloneObject(a,c,d){var c=typeof c=="undefined"?true:c?true:false,d=typeof d!="object"?{}:d,b={},g,f;for(f in a)g=getClass(a[f]),d[f]||(b[f]=g=="Object"&&c?cloneObject(a[f],c):g=="Array"&&c?cloneArray(a[f],c):a[f]);return b}
function cloneArray(a,c){for(var d=typeof c=="undefined"?true:c?true:false,b=[],g,f=0;f<a.length;f++)g=getClass(a[f]),b[f]=g=="Object"&&d?cloneObject(a[f],d):g=="Array"&&d?cloneArray(a[f],d):a[f];return b}Array.prototype.clone=function(a){return cloneArray(this,a)};
function findNext(a,c,d){if(!a||getClass(a)!="Array"||a.length<=0)return null;if(typeof c=="undefined")return a[0];typeof d=="undefined"&&(d=true);for(var b=0,g=0,f=0;f<1&&b<a.length;){if(g)return a[b]==c?null:a[b];a[b]==c&&(g=1);++b>=a.length&&d&&(b=0,f++)}return null}Array.prototype.next=function(a,c){return findNext(this,a,c)};
function findPrev(a,c,d){if(!a||getClass(a)!="Array"||a.length<=0)return null;if(typeof c=="undefined")return a[a.length-1];typeof d=="undefined"&&(d=true);for(var b=a.length,g=0,f=0;f<1&&b>=0;){if(g)return a[b]==c?null:a[b];a[b]==c&&(g=1);--b<0&&d&&(b=a.length-1,f++)}return null}Array.prototype.prev=function(a,c){return findPrev(this,a,c)};
function buildMap(a,c){var d={};if(!a||getClass(a)!="Array")return d;for(var b,g,f=c&&c.key?c.key:"key",e=0;e<a.length;e++)b=a[e],g=typeof b[f]!="undefined"?b[f]:b,d[g]=b;return d}Array.prototype.map=function(a){return buildMap(this,a)};
function formatDate(a,c,d){var b=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,g=typeof c==="string"?c.match(b):null,b=function(a,b){a=String(a);for(b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},e=0,h,i=["i18n"];d||(d={dayNames:"Sun,Mon,Tue,Wed,Thr,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),monthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December".split(","),
AmPm:["am","pm","AM","PM"],S:function(a){return a<11||a>13?["st","nd","rd","th"][Math.min((a-1)%10,3)]:"th"}});i.i18n={dayNames:d.dayNames,monthNames:d.monthNames};if(c.constructor===Number)String(a).toLowerCase()=="u"&&(c*=1E3),e=new Date(c);else if(c.constructor===Date)e=c;else if(g!==null)e=new Date(parseInt(g[1],10)),g[3]&&(c=Number(g[5])*60+Number(g[6]),c*=g[4]=="-"?1:-1,c-=e.getTimezoneOffset(),e.setTime(Number(Number(e)+c*6E4)));else{c=String(c).split(/[\\\/:_;.,\t\T\s-]/);a=a.split(/[\\\/:_;.,\t\T\s-]/);
for(g=0,h=a.length;g<h;g++)a[g]=="M"&&(e=$.inArray(c[g],i.i18n.monthNames),e!==-1&&e<12&&(c[g]=e+1)),a[g]=="F"&&(e=$.inArray(c[g],i.i18n.monthNames),e!==-1&&e>11&&(c[g]=e+1-12)),c[g]&&(f[a[g].toLowerCase()]=parseInt(c[g],10));if(f.f)f.m=f.f;if(f.m===0&&f.y===0&&f.d===0)return"&#160;";f.m=parseInt(f.m,10)-1;e=f.y;if(e>=70&&e<=99)f.y=1900+f.y;else if(e>=0&&e<=69)f.y=2E3+f.y;e=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)}c=e.getHours();f=e.getMinutes();g=e.getDate();h=e.getMonth()+1;var j=e.getTimezoneOffset(),
k=e.getSeconds(),s=e.getMilliseconds(),n=e.getDay(),l=e.getFullYear(),o=(n+6)%7+1,q=(new Date(l,h-1,g)-new Date(l,0,1))/864E5,r={d:b(g),D:i.i18n.dayNames[n],j:g,l:i.i18n.dayNames[n+7],N:o,S:d.S(g),w:n,z:q,W:o<5?Math.floor((q+o-1)/7)+1:Math.floor((q+o-1)/7)||(((new Date(l-1,0,1)).getDay()+6)%7<4?53:52),F:i.i18n.monthNames[h-1+12],m:b(h),M:i.i18n.monthNames[h-1],n:h,t:"?",L:"?",o:"?",Y:l,y:String(l).substring(2),a:c<12?d.AmPm[0]:d.AmPm[1],A:c<12?d.AmPm[2]:d.AmPm[3],B:"?",g:c%12||12,G:c,h:b(c%12||12),
H:b(c),i:b(f),s:b(k),u:s,e:"?",I:"?",O:(j>0?"-":"+")+b(Math.floor(Math.abs(j)/60)*100+Math.abs(j)%60,4),P:"?",T:(String(e).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(e/1E3)};return a.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return a in r?r[a]:a.substring(1)})}
Date.prototype.format=function(a,c){return formatDate(a,this,c)};
function parseDate(a,c){var d={m:1,d:1,y:1970,h:0,i:0,s:0},b,g,f;b=/[\\\/:_;.,\t\T\s-]/;if(!c||c==null||c==""||c==void 0)return null;var c=$.trim(c),c=c.split(b),a=a.split(b),e=$.jgrid.formatter.date.monthNames,h=$.jgrid.formatter.date.AmPm,i=function(a,b){a===0?b==12&&(b=0):b!=12&&(b+=12);return b};for(b=0,g=a.length;b<g;b++){a[b]=="M"&&(f=$.inArray(c[b],e),f!==-1&&f<12&&(c[b]=f+1));a[b]=="F"&&(f=$.inArray(c[b],e),f!==-1&&f>11&&(c[b]=f+1-12));if(a[b]=="a"&&(f=$.inArray(c[b],h),f!==-1&&f<2&&c[b]==
h[f]))c[b]=f,d.h=i(c[b],d.h);if(a[b]=="A"&&(f=$.inArray(c[b],h),f!==-1&&f>1&&c[b]==h[f]))c[b]=f-2,d.h=i(c[b],d.h);c[b]!==void 0&&(d[a[b].toLowerCase()]=parseInt(c[b],10))}d.m=parseInt(d.m,10)-1;b=d.y;if(b>=70&&b<=99)d.y=1900+d.y;else if(b>=0&&b<=69)d.y=2E3+d.y;return new Date(d.y,d.m,d.d,d.h,d.i,d.s,0)}String.prototype.parseDate=function(a){return parseDate(a,this)};
function getClass(a){if(a!=void 0&&a.constructor&&a.constructor.toString()){if((m=a.constructor.toString().match(/function\s*(\w+)/))&&m.length==2)return m[1];if((m=a.constructor.toString().match(/object\s*(\w+)/))&&m.length==2)return m[1]}return typeof a}
var MB_OK=1,MB_CANCEL=2,MB_OKCANCEL=3,MB_YES=4,MB_NO=8,MB_YESNO=12,MB_YESNOCANCEL=14,ID_OK=1,ID_CANCEL=2,ID_YES=4,ID_NO=8,MB_OK_TEXT="\u786e\u5b9a",MB_CANCEL_TEXT="\u53d6\u6d88",MB_YES_TEXT=" \u662f ",MB_NO_TEXT=" \u5426 ",BUTTON_OK,BUTTON_YES,BUTTON_NO,BUTTON_CANCEL,MB_ICONERROR=MB_ICONSTOP="/image/icon-error.gif",MB_ICONINFORMATION="/image/icon-info.gif",MB_ICONQUESTION="/image/icon-question.gif",MB_ICONWARNING="/image/icon-warning.gif";
function MessageBox(){var a=$("#ids_message_box");a.dialog("destroy");var c=function(){a.dialog("close").dialog("destroy")};if(arguments.length!=0&&arguments[0]){var d=arguments[0];typeof d!="object"&&(d={msg:d.toString()});var b=0,g=d.msg.replace(/\n/g,"<br>"),f=d.msg.width()*8;f<320?f=320:f>800&&(f=800);var e=typeof d.title!="undefined"?d.title:typeof arguments[1]!="undefined"?arguments[1]:IDS_TITLE;e==null&&(e=IDS_TITLE);var h=typeof d.icon=="string"?d.icon:typeof arguments[2]=="string"?arguments[2]:
null;h&&(h=IDS_CONTEXT_PATH+h+"?"+IDS_VER);var i=d.button?d.button:arguments[3]?arguments[3]:0,j=[];BUTTON_OK={text:MB_OK_TEXT,click:function(){b=ID_OK;$(this).dialog("close")}};BUTTON_YES={text:MB_YES_TEXT,click:function(){b=ID_YES;$(this).dialog("close")}};BUTTON_NO={text:MB_NO_TEXT,click:function(){b=ID_NO;$(this).dialog("close")}};BUTTON_CANCEL={text:MB_CANCEL_TEXT,click:function(){b=ID_CANCEL;$(this).dialog("close")}};i&MB_OK&&j.push(BUTTON_OK);i&MB_YES&&j.push(BUTTON_YES);i&MB_NO&&j.push(BUTTON_NO);
i&MB_CANCEL&&j.push(BUTTON_CANCEL);var k=d.callback&&$.isFunction(d.callback)?d.callback:arguments[4]&&$.isFunction(arguments[4])?arguments[4]:null,d=typeof d.timeout=="number"?d.timeout:typeof arguments[5]=="number"?arguments[5]:IDS_TIMEOUT,d=parseFloat(d),f=$.browser.msie&&$.browser.version<7?{buttons:j,closeOnEscape:true,draggable:true,resizable:true,width:f,zIndex:99999}:{bgiframe:true,buttons:j,closeOnEscape:true,draggable:true,modal:true,resizable:true,width:f,zIndex:99999};if(k)f.close=function(){k(b)};
a.dialog("destroy").attr("title",e).html("<div class='left'><div class='left ui-dialog-content-icon'><img id='mb_icon' /></div><div class='left'>"+g+"</div></div>").dialog(f);f=a.parent();g=f.height();e=$("div.ui-dialog-titlebar",f).height();f=$("div.ui-dialog-buttonset > button",f).height();a.height(g-e-f-32);$(".ui-dialog .ui-dialog-content #mb_icon").attr("src",h);d>0&&setTimeout(c,d*1E3)}}window._alert=window.alert;window.alert=function(a){MessageBox(a,IDS_ERROR,MB_ICONERROR,MB_OK,null,0)};
window._error=function(a){MessageBox(a,IDS_ERROR,MB_ICONERROR,MB_OK,null,0)};function ajaxError(a,c,d){a=getAjaxError(a,c,d);MessageBox(a.error,IDS_TITLE,MB_ICONERROR,MB_OK,a.callback,d)}
function getAjaxError(a,c,d){var b=a.length>0?a[0]:null,g=a.length>1?a[1]:null,f=a.length>2?a[2]:null,e=getClass(b),a="\u62b1\u6b49, \u7cfb\u7edf\u53d1\u751f\u9519\u8bef: \n",h=null;g&&(a+="\u9519\u8bef\u4ee3\u7801: "+g+"\n");typeof f=="string"?(m=f.match(/(.*?):/),a+=m?"\u9519\u8bef\u8be6\u60c5: "+m[1]+"...\n":"\u9519\u8bef\u8be6\u60c5: "+f+"\n"):getClass(f)=="SyntaxError"&&(a+=f+"\n");c.type&&(a+="\u8bf7\u6c42\u7c7b\u578b: "+c.type+"\n");c.url&&(a+="\u8bf7\u6c42URL: "+c.url+"\n");e=="XMLHttpRequest"&&
b.status!=200&&(a+="\u8fd4\u56de\u72b6\u6001: "+b.status+"("+b.statusText+")\n\u54cd\u5e94\u5934: "+b.getAllResponseHeaders()+"\n");a+="\u8bf7\u8054\u7cfb\u7cfb\u7edf\u7ba1\u7406\u5458!";typeof d=="undefined"&&(d=0);if(b)g=b.getResponseHeader("ERROR-CODE"),g=="not.login"&&(a="\u60a8\u5c1a\u672a\u767b\u5f55\u6216\u4f1a\u8bdd\u5df2\u7ecf\u8fc7\u671f!\n\u8bf7\u91cd\u65b0\u767b\u5f55!",h=function(){window.location.href=IDS_CONTEXT_PATH+"/"}),c=b.status,c==401&&(a="\u60a8\u7684\u8d26\u53f7\u672a\u7ecf\u6388\u6743!\n\u8bf7\u4f7f\u7528\u5177\u6709\u76f8\u5173\u6743\u9650\u7684\u8d26\u53f7\u767b\u5f55!",
h=function(){window.location.href=IDS_CONTEXT_PATH+"/"});return{error:a,callback:h}}function getErrorMessage(a){return!a?"":a.rootCause&&a.rootCause.localizedMessage?a.rootCause.localizedMessage:a.message?a.message:typeof a=="string"?a:"\u53d1\u751f\u9519\u8bef!"}
function debug(a,c){var d=function(a,b,c){if(typeof a=="function")return"fucntion..";else if(typeof a!="object"||c<=0)return typeof a=="string"?a.text():a;var h="\n",i;for(i in a)h=h.concat("&nbsp;".repeat(b),i,"[",getClass(a[i]),"]: ",d(a[i],b+2,c-1),"\n");return h};typeof c=="undefined"&&(c=1);var b="type: "+typeof a+", class: "+getClass(a)+", detail:\n"+d(a,0,c);MessageBox(b,IDS_INFO,MB_ICONINFORMATION,MB_OK,null,0)}
function bind(a){if(a&&a.controls){var c=a.controls,d={blur:1,focus:1,focusin:1,focusout:1,load:1,resize:1,scroll:1,unload:1,click:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1,change:1,select:1,submit:1,keydown:1,keypress:1,keyup:1,error:1,controls:0},b={},g;for(g in a)d[g]&&typeof a[g]=="function"&&(b[g]=a[g]);var d=[],f;for(f in c)(g=c[f])&&!(typeof g!="object"||typeof g[0]!="object")&&d.push(g[0]);a["#controls"]=d;for(f in c)if((g=c[f])&&!(typeof g!=
"object"||typeof g.bind!="function"))for(var e in b)g.bind(e,a,b[e])}}
function unbind(a){if(a&&a.controls){var c=a.controls,d={blur:1,focus:1,focusin:1,focusout:1,load:1,resize:1,scroll:1,unload:1,click:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1,change:1,select:1,submit:1,keydown:1,keypress:1,keyup:1,error:1,controls:0},b={},g;for(g in a)d[g]&&typeof a[g]=="function"&&(b[g]=a[g]);for(var f in c)if((a=c[f])&&!(typeof a!="object"||typeof a.bind!="function"))for(var e in b)a.unbind(e,b[e])}}
function getInputableItems(){return null}var VK_ENTER=13,VK_UP=38,VK_DOWN=40;function genericKeyDown(a){if(a){var c=a.data?a.data:a.currentTarget?getInputableItems(a.currentTarget):null;if(c&&getClass(c.controls)=="Array"){var d=a.target,c=c["#controls"],a=a.keyCode,b=function(a,b){var c=$(a);c&&(typeof c.focus=="function"&&c.focus(),typeof c.click=="function"&&b==VK_ENTER&&c.click(),typeof c.btOn=="function"&&c.btOn())};a==VK_ENTER||a==VK_DOWN?b(c.next(d),a):a==VK_UP&&b(c.prev(d),a)}}}
$.fn.serialize=function(){var a={},c=this.serializeArray();$.each(c,function(){a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""});return a};
$.fn.addOptions=function(a,c){try{var d=$(this);if(!(d[0].tagName!="SELECT"&&d[0].tagName!="OPTGROUP")&&a){typeof a!="object"&&(a=[a]);typeof c=="undefined"&&(c={});var c=$.extend({value:"code",text:"text",svalue:null,stext:null,clear:true,children:null,blank:false},c),b,g,f,e,h,i;i=c.children;c.clear&&d.children().remove();c.blank&&(b=$(document.createElement("option")),b.val(""),b.text(""),d.append(b));for(var j in a){g=a[j];if(typeof g=="object")f=g[c.value],e=g[c.text],h=g;else if(typeof g=="function")continue;
else f=e=g,h=null;f&&(i&&g.hasOwnProperty(i)?(b=$(document.createElement("optgroup")),b.attr("label",e),$(b).addOptions(g[i],c)):(b=$(document.createElement("option")),b.val(f),b.text(e),h&&b.data(h),(c.svalue==f||c.stext==e)&&b.attr("selected",true)),d.append(b))}}}catch(k){alert(k)}};
$.fn.addButtons=function(a,c){var d,b=$(this);if(b&&b[0].tagName=="DIV"&&a){typeof a!="object"&&(a=[a]);typeof c=="undefined"&&(c={});c=$.extend({clear:true,data:[]},c);c.clear&&b.children().remove();d=b.css("float");var g=function(a){if((a=a.data)&&!(a.length<=0)){var b=a[a.length-1];typeof b.click=="function"&&b.click.apply(this,a)}},f=function(a){var b=$(document.createElement("a"));b.addClass("button");b.text(a.text);a.id&&b.attr("id",a.id);a.title&&b.attr("title",a.title);typeof a.click=="function"?
(b.addClass("enabled"),b.click(c.data.concat([a]),g)):a.href?(b.addClass("enabled"),b.attr("href",a.href)):b.addClass("disabled");return b};if(typeof a=="undefined"||a.length<=0)b.hide();else{if(d=="right")for(d=a.length-1;d>=0;d--)b.append(f(a[d]));else for(d=0;d<a.length;d++)b.append(f(a[d]));b.show()}}};
$.fn.addRow=function(a,c){var d,b=$(this);if(b&&b[0].tagName=="TABLE"&&a){b=$(document.createElement("tr"));for(d=0;d<a.length;d++)b.addCell(a[d],c);typeof c=="undefined"&&(c={});c.cssClass&&b.addClass(c.cssClass);d={id:1};for(p in c)d[p]&&b.attr(p,c[p]);$(this).append(b);return b}};
$.fn.addCell=function(a){var c,d=$(this);typeof a=="string"&&(a={text:a});var b=$(document.createElement("td"));a.text&&b.text(a.text);a.html&&b.html(a.html);a.cssClass&&b.addClass(a.cssClass);c={align:1,colspan:1,rowspan:1,width:1};for(p in a)c[p]&&b.attr(p,a[p]);typeof a.callback=="function"&&a.callback(b);if(a.obj)for(var g=getClass(a.obj)=="Array"?a.obj:[a.obj],a=0;a<g.length;a++)typeof g[a]=="string"&&(c=g[a],g[a]=$(document.createElement("span")),g[a].text(c)),b.append(g[a]);d.append(b);return b};
$.fn.test=function(){return(this[0]&&this[0].tagName?this[0].tagName:"$.fn")+": Hello World!"};
$.fn.addElement=function(a){if(!a)return null;var c=this[0]&&this[0].tagName&&this.append,d={input:1,textarea:1},b=a.hint?$.evalJSON(a.hint):null,g=b&&b.list&&b.list.length>0?b.list:null,f=$.extend({type:"input",disabled:false,hidden:false,readonly:false},a["#base"]),e=$.extend(f,a),h;for(h in a)e.hasOwnProperty(h)||(e[h]=a[h]);if(e.type=="input"&&!e.style)e.style="width:99%";if(b&&e.type!="span"&&b.type=="select"&&b.list&&b.list.length>0)e.type="select",e.style=b.style;if(!e.text&&e.value&&d[e.type]!=
1)e.text=e.value;if(!e.value&&e.text&&d[e.type]==1)e.value=e.text;if(e.params&&getClass(e.params)!="Array")e.params=[e.params];typeof e.preCreate=="function"&&e.preCreate(e);b=$(document.createElement(e.type));e.id&&b.attr("id",e.id);e.text&&b.text&&b.text(e.text);e.value&&b.val&&b.val(e.value);f=e.css?e.css.split(","):[];for(a=0;a<f.length;a++)b.addClass(f[a]);e.style&&b.attr("style",e.style);e.title&&b.attr("title",e.title);e.disabled&&b.attr("disabled",true);e.disabled&&d[e.type]==1&&b.css("background-color",
"#808080");e.hidden&&b.attr("type","hidden");e.readonly&&b.attr("readonly",true);e.readonly&&d[e.type]==1&&b.css("color","#808080");if(e.type=="select"&&g)for(a=0;a<g.length;a++)d=$(document.createElement("option")),d.text(g[a].text),d.val(g[a].value),g[a].value==e.value&&d.attr("selected",true),b.append(d);e.html&&b.html(e.html);typeof e.postCreate=="function"&&e.postCreate(e,b);c&&this.append(b);var i=this;c&&typeof e.onShow=="function"&&setTimeout(function(){e.onShow(i,e.id,e.params)},200);typeof e.click==
"function"&&setTimeout(function(){var a=e.click,b=e.params;$("#"+e.id).bind("click",b,a)},200);return b};
